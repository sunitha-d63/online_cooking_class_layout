{% extends 'layout/base.html' %} {% block title %}Enrollment{% endblock %} {%
block navbar %} {% include 'include/nav_success.html' %} {% endblock %} {% block
style %}
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/enroll.css') }}"
/>
{% endblock %} 
{% block content %}
 <div class="login-container my-5">
      <h3 class="login-title">ENROLL</h3>
      <p class="text-center mt-4 fw-semibold">BAKERY BUSINESS ACCELERATOR PROGRAM</p>
  <form method="POST" novalidate>
    {{ form.hidden_tag() }}
    <div class="mx-auto" style="max-width: 800px">
      <div class="row  p-3 rounded mb-4 shadow-sm align-items-center">
        <div class="col-md-8">
          <div class="mb-3">
            {{ form.name.label(class="form-label fw-semibold") }} {{
            form.name(class="form-control rounded-pill py-2") }} {% for err in
            form.name.errors %}
            <small class="text-danger">{{ err }}</small>
            {% endfor %}
          </div>
          <div class="mb-3">
            {{ form.email.label(class="form-label fw-semibold") }} {{
            form.email(class="form-control rounded-pill py-2") }} {% for err in
            form.email.errors %}
            <small class="text-danger">{{ err }}</small>
            {% endfor %}
          </div>
          <div class="mb-3">
            {{ form.mobile.label(class="form-label fw-semibold") }} {{
            form.mobile(class="form-control rounded-pill py-2") }} {% for err in
            form.mobile.errors %}
            <small class="text-danger">{{ err }}</small>
            {% endfor %}
          </div>
        </div>
        <div class="col-md-4 text-md-center mt-3 mt-md-0">
          <div class="small text-muted mb-2">OR</div>
          <a href="{{ url_for('login', next=request.path) }}" class="text-decoration-underline fw-semibold text-dark">Already have an account?</a>
          </a>
        </div>
      </div>
      <div class="bg-white p-3 rounded mb-4 shadow-sm">
        <div class="form-check">
          {{ form.gstin(class="form-check-input") }} {{
          form.gstin.label(class="form-check-label fw-semibold") }} {% for err
          in form.gstin.errors %}
          <small class="text-danger">{{ err }}</small>
          {% endfor %}
        </div>
      </div>
      {% for label, amount in [ ('SUB TOTAL:', subtotal), ('DISCOUNT:',
      discount), ('TOTAL (incl. GST):', total) ] %}
      <div
        class="d-flex justify-content-between bg-white p-3 rounded mb-2 shadow-sm fw-semibold"
      >
        <span>{{ label }}</span>
        <span>INR {{ '%.2f'|format(amount) }}</span>
      </div>
      {% endfor %}
      <div class="bg-white p-3 rounded mb-4 shadow-sm">
        <div class="input-group">
          {{ form.coupon(class="form-control", placeholder="Enter coupon code")
          }}
          <div class="input-group-btn custom-space">
            <button
              class="btn btn-outline-secondary"
              type="submit"
              name="apply_coupon"
            >
              APPLY COUPON
            </button>
          </div>
        </div>
        {% for err in form.coupon.errors %}
        <small class="text-danger">{{ err }}</small>
        {% endfor %}
      </div> 
 <div class="bg-white p-3 rounded mb-4 shadow-sm">
  <input type="hidden" id="payment" name="payment" value="{{ form.payment.data or '' }}">
  <div class="row">
    <div class="col text-center">
      <div class="fw-semibold mb-2">USE UPI PAYMENT</div>
      <button
        type="button"
        class="btn btn-outline-dark w-100 rounded-pill py-3 me-2"
        onclick="selectPayment('upi')"
      >
        + UPI ID
      </button>
    </div>
    <div class="col text-center">
      <div class="fw-semibold mb-2">CARD PAYMENT</div>
      <button
        type="button"
        class="btn btn-outline-dark w-100 rounded-pill py-3"
        onclick="selectPayment('card')"
      >
        + CARD NUMBER
      </button>
    </div>
  </div>
</div>
      <div class="text-center">
        {{ form.submit(class="btn btn-danger rounded-pill py-3 px-5") }}
      </div>
    </div>
  </form>
</div>
{% endblock %}
{% block scripts %}
<script>
  function selectPayment(method) {
    document.getElementById('payment').value = method;
    document.querySelectorAll('.btn-outline-primary').forEach(btn => {
      btn.classList.remove('btn-primary');
      btn.classList.add('btn-outline-primary');
    });
    const selectedBtn = method === 'upi' ? document.querySelector('.me-2') : document.querySelector('.me-2 + .btn');
    if (selectedBtn) {
      selectedBtn.classList.add('btn-primary');
      selectedBtn.classList.remove('btn-outline-primary');
    }
  }
</script>
{% endblock %}

